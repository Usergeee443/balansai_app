<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Balans AI</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/style.css">
    
    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Asosiy Sahifa -->
    <div id="pageHome" class="page active">
        <!-- Header -->
        <header class="app-header">
            <img src="/static/logo.png" alt="Balans AI" class="app-logo" id="headerLogo">
        </header>

        <!-- Umumiy Balans -->
        <div class="balance-card" onclick="showBalanceDetails()">
            <div class="balance-icon">
                <img src="/static/js/moneys.svg" alt="Money" class="balance-icon-img">
            </div>
            <div class="balance-amount" id="totalBalance">0 so'm</div>
            <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </div>

        <!-- Valyutalar -->
        <div class="currency-list" id="currencyList">
            <!-- JavaScript orqali yuklanadi -->
        </div>

        <!-- So'nggi Tranzaksiyalar -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">So'nggi tranzaksiyalar</h2>
                <svg class="section-arrow" onclick="navigateTo('transactions')" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="transactions-scroll" id="transactionsList">
                <!-- JavaScript orqali yuklanadi -->
            </div>
        </section>

        <!-- Statistika -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">Statitikalar</h2>
                <svg class="section-arrow" onclick="navigateTo('statistics')" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="stats-card">
                <canvas id="statsChart" class="stats-canvas"></canvas>
            </div>
        </section>
    </div>

    <!-- Tranzaksiyalar Sahifasi -->
    <div id="pageTransactions" class="page">
        <div class="page-header">
            <h2 class="page-title">Tranzaksiyalar</h2>
        </div>
        
        <!-- Search -->
        <div class="search-section">
            <div class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <input type="text" id="transactionSearch" placeholder="Qidiring..." class="search-input">
            </div>
        </div>
        
        <!-- Filter -->
        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">Barchasi</button>
            <button class="filter-btn" data-filter="income">Kirim</button>
            <button class="filter-btn" data-filter="expense">Chiqim</button>
            <button class="filter-btn" data-filter="debt_given">Qarz berish</button>
            <button class="filter-btn" data-filter="debt_taken">Qarz olish</button>
        </div>
        
        <!-- Transactions List -->
        <div id="allTransactionsList" class="transactions-list-grouped">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>

    <!-- Statistika Sahifasi -->
    <div id="pageStatistics" class="page">
        <div class="page-header">
            <h2 class="page-title">Statistika</h2>
        </div>
        
        <div id="statisticsContent" style="padding: 16px; min-height: 400px;">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>

    <!-- Balans Tafsilotlari Sahifasi -->
    <div id="pageBalanceDetails" class="page">
        <div class="page-header">
            <button class="back-btn" onclick="navigateTo('home')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h2 class="page-title">Balans tafsilotlari</h2>
        </div>
        
        <div id="balanceDetailsContent" style="padding: 16px;">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>

    <!-- Eslatmalar Sahifasi -->
    <div id="pageReminders" class="page">
        <div class="page-header">
            <h2 class="page-title">Eslatmalar</h2>
        </div>
        
        <div id="remindersList" class="reminders-list">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>
    
    <!-- Qarzlar Sahifasi -->
    <div id="pageDebts" class="page">
        <div class="page-header">
            <h2 class="page-title">Qarzlar</h2>
        </div>
        
        <!-- Kontaktlar ro'yxati -->
        <div id="contactsList" class="contacts-list">
            <!-- JavaScript orqali yuklanadi -->
        </div>
        
        <!-- Qarzlar ro'yxati (kontakt tanlanganda) -->
        <div id="debtsList" class="debts-list" style="display: none;">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>
    
    <!-- Contact Detail Modal -->
    <div id="contactDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="contactDetailName">Kontakt</h3>
                <button class="modal-close" onclick="closeContactDetailModal()">âœ•</button>
            </div>
            <div class="modal-body">
                <div id="contactDebtsList"></div>
            </div>
        </div>
    </div>
    
    <!-- Debt Detail Modal -->
    <div id="debtDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Qarz ma'lumotlari</h3>
                <button class="modal-close" onclick="closeDebtDetailModal()">âœ•</button>
            </div>
            <div class="modal-body" id="debtDetailContent">
                <!-- JavaScript orqali yuklanadi -->
            </div>
        </div>
    </div>

    <!-- Not Registered Modal -->
    <div id="notRegisteredModal" class="modal not-registered-modal">
        <div class="modal-content not-registered-content">
            <div class="not-registered-icon">ðŸ‘¤</div>
            <h2 class="not-registered-title">Ro'yxatdan o'tmagansiz</h2>
            <p class="not-registered-message">
                Ilovadan foydalanish uchun avval Telegram botimiz orqali ro'yxatdan o'tishingiz kerak.
            </p>
            <button class="btn-primary not-registered-btn" onclick="openTelegramBot()">
                Botga o'tish
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 18V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M10.07 2.82L3.14 8.37C2.36 8.99 1.86 10.3 2.03 11.28L3.36 19.24C3.6 20.66 4.96 21.81 6.4 21.81H17.6C19.03 21.81 20.4 20.65 20.64 19.24L21.97 11.28C22.13 10.3 21.63 8.99 20.86 8.37L13.93 2.83C12.86 1.97 11.13 1.97 10.07 2.82Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="transactions">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 22H17C20 22 22 20 22 17V12C22 9.3 20.3 7.3 17.8 7C17.6 7 17.3 7 17 7H7C6.7 7 6.5 7 6.2 7.1C3.6 7.4 2 9.3 2 12V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M22 12.5H19C17.9 12.5 17 13.4 17 14.5C17 15.6 17.9 16.5 19 16.5H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="statistics">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M10.11 11.15H7.46C6.83 11.15 6.32 11.66 6.32 12.29V17.41H10.11V11.15Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12.76 6.6H11.24C10.61 6.6 10.1 7.11 10.1 7.74V17.4H13.89V7.74C13.89 7.11 13.39 6.6 12.76 6.6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M16.55 12.85H13.9V17.4H17.69V13.99C17.68 13.36 17.17 12.85 16.55 12.85Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="reminders">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M20.75 13.25C20.75 18.08 16.83 22 12 22C7.17 22 3.25 18.08 3.25 13.25C3.25 8.42 7.17 4.5 12 4.5C16.83 4.5 20.75 8.42 20.75 13.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12 8V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9 2H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="debts">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M20.5 11.3V7.04C20.5 3.01 19.56 2 15.78 2H8.22C4.44 2 3.5 3.01 3.5 7.04V18.3C3.5 20.96 4.96 21.59 6.73 19.69L6.74 19.68C7.56 18.81 8.81 18.88 9.52 19.83L10.53 21.18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M8 7H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9 11H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
    </nav>

    <!-- Main JavaScript -->
    <script src="/static/js/main.js"></script>
</body>
</html>
