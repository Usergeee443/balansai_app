<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Balans AI</title>
    
    <!-- Wallet Style CSS -->
    <link rel="stylesheet" href="/static/css/wallet-style.css">
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- ============================================
         HOME PAGE - WALLET STYLE
         ============================================ -->
    <div id="pageHome" class="page active">
        <!-- Header -->
        <div class="wallet-header">
            <div class="wallet-header-left">
                <div class="wallet-avatar" id="userAvatar">B</div>
                <span class="wallet-title">Balans AI</span>
            </div>
            <div class="wallet-header-right">
                <div class="wallet-header-icon" onclick="showNotifications()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                </div>
                <div class="wallet-header-icon" onclick="navigateTo('profile')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
                </div>
            </div>
        </div>

        <!-- Balance Section with Gauge -->
        <div class="wallet-balance-section">
            <div class="wallet-gauge-container">
                <svg class="wallet-gauge-svg" viewBox="0 0 200 120">
                    <defs>
                        <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#0A84FF"/>
                            <stop offset="50%" style="stop-color:#5E5CE6"/>
                            <stop offset="100%" style="stop-color:#BF5AF2"/>
                        </linearGradient>
                    </defs>
                    <!-- Background arc -->
                    <path class="wallet-gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100"/>
                    <!-- Fill arc -->
                    <path class="wallet-gauge-fill" id="gaugeFill" d="M 20 100 A 80 80 0 0 1 180 100" stroke-dasharray="251" stroke-dashoffset="125"/>
                </svg>
                <div class="wallet-gauge-text">
                    <div class="wallet-balance-label">Umumiy balans</div>
                    <div class="wallet-balance-amount" id="totalBalance">0 so'm</div>
                </div>
        </div>

            <button class="wallet-cta-btn" onclick="showAddTransactionModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                Tranzaksiya qo'shish
            </button>
        </div>

        <!-- Action Buttons -->
        <div class="wallet-actions">
            <div class="wallet-action-item" onclick="showAddTransactionModal('income')">
                <div class="wallet-action-icon green">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 19V5M5 12l7-7 7 7"/>
                    </svg>
                </div>
                <span class="wallet-action-label">Kirim</span>
            </div>
            <div class="wallet-action-item" onclick="showAddTransactionModal('expense')">
                <div class="wallet-action-icon" style="background: rgba(255, 69, 58, 0.15);">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="stroke: #FF453A;">
                        <path d="M12 5v14M5 12l7 7 7-7"/>
                    </svg>
                </div>
                <span class="wallet-action-label">Chiqim</span>
            </div>
            <div class="wallet-action-item" onclick="navigateTo('debts')">
                <div class="wallet-action-icon orange">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 11h4a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h4"/>
                        <rect x="8" y="5" width="8" height="12" rx="1"/>
                    </svg>
                </div>
                <span class="wallet-action-label">Qarzlar</span>
            </div>
            <div class="wallet-action-item" onclick="navigateTo('statistics')">
                <div class="wallet-action-icon purple">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20V10M12 20V4M6 20v-6"/>
                    </svg>
                </div>
                <span class="wallet-action-label">Statistika</span>
            </div>
        </div>

        <!-- Info Card -->
        <div class="wallet-info-card" onclick="navigateTo('services')">
            <div class="wallet-info-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
            </div>
            <div class="wallet-info-content">
                <div class="wallet-info-title">Barcha xizmatlar</div>
                <div class="wallet-info-subtitle">
                    Eslatmalar, maqsadlar va boshqalar
                    <svg class="wallet-info-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="wallet-section">
            <div class="wallet-section-header">
                <h2 class="wallet-section-title">So'nggi tranzaksiyalar</h2>
                <button class="wallet-section-action" onclick="navigateTo('transactions')">Barchasi</button>
            </div>
            <div class="wallet-transactions-list" id="homeTransactionsList">
                <!-- Loaded via JavaScript -->
            </div>
        </div>
    </div>

    <!-- ============================================
         TRANSACTIONS PAGE
         ============================================ -->
    <div id="pageTransactions" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Tranzaksiyalar</h1>
            <div class="wallet-page-actions">
                <button class="wallet-icon-btn" onclick="showAddTransactionModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Search -->
        <div class="wallet-search">
            <svg class="wallet-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
                </svg>
            <input type="text" class="wallet-search-input" id="transactionSearch" placeholder="Qidirish..." oninput="filterTransactions()">
        </div>
        
        <!-- Filter Pills -->
        <div class="wallet-filters">
            <button class="wallet-filter-btn active" data-filter="all" onclick="setTransactionFilter('all', this)">Barchasi</button>
            <button class="wallet-filter-btn" data-filter="income" onclick="setTransactionFilter('income', this)">Kirim</button>
            <button class="wallet-filter-btn" data-filter="expense" onclick="setTransactionFilter('expense', this)">Chiqim</button>
        </div>
        
        <!-- Transactions List -->
        <div id="transactionsContainer">
            <!-- Loaded via JavaScript -->
        </div>
    </div>

    <!-- ============================================
         STATISTICS PAGE
         ============================================ -->
    <div id="pageStatistics" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Statistika</h1>
        </div>

        <!-- Period Selector -->
        <div class="wallet-segment" style="margin: 0 16px 16px;">
            <button class="wallet-segment-btn active" data-period="week" onclick="loadStatistics('week', this)">Hafta</button>
            <button class="wallet-segment-btn" data-period="month" onclick="loadStatistics('month', this)">Oy</button>
            <button class="wallet-segment-btn" data-period="year" onclick="loadStatistics('year', this)">Yil</button>
            <button class="wallet-segment-btn" data-period="all" onclick="loadStatistics('all', this)">Hammasi</button>
        </div>

        <!-- Overview Stats -->
        <div class="wallet-stats-overview">
            <div class="wallet-stat-card">
                <div class="wallet-stat-value positive" id="statIncome">0</div>
                <div class="wallet-stat-label">Kirim</div>
            </div>
            <div class="wallet-stat-card">
                <div class="wallet-stat-value negative" id="statExpense">0</div>
                <div class="wallet-stat-label">Chiqim</div>
            </div>
            <div class="wallet-stat-card">
                <div class="wallet-stat-value" id="statNet">0</div>
                <div class="wallet-stat-label">Sof foyda</div>
            </div>
        </div>

        <!-- Balance Trend Chart -->
        <div class="wallet-chart-card">
            <div class="wallet-chart-header">
                <span class="wallet-chart-title">Balans trendi</span>
            </div>
            <canvas id="balanceTrendChart" class="wallet-chart-canvas"></canvas>
        </div>

        <!-- Two Charts Row -->
        <div class="wallet-charts-row">
            <div class="wallet-chart-card wallet-chart-half">
                <div class="wallet-chart-header">
                    <span class="wallet-chart-title">Kirim/Chiqim</span>
                </div>
                <canvas id="incomeExpenseChart" class="wallet-chart-canvas-sm"></canvas>
            </div>
            <div class="wallet-chart-card wallet-chart-half">
                <div class="wallet-chart-header">
                    <span class="wallet-chart-title">Kategoriyalar</span>
                </div>
                <canvas id="categoryChart" class="wallet-chart-canvas-sm"></canvas>
            </div>
        </div>

        <!-- Daily Spending Chart -->
        <div class="wallet-chart-card">
            <div class="wallet-chart-header">
                <span class="wallet-chart-title">Kunlik xarajatlar</span>
            </div>
            <canvas id="dailySpendingChart" class="wallet-chart-canvas"></canvas>
        </div>

        <!-- Top Categories List -->
        <div class="wallet-chart-card">
            <div class="wallet-chart-header">
                <span class="wallet-chart-title">Top kategoriyalar</span>
            </div>
            <div id="topCategoriesList"></div>
        </div>

        <!-- Stats Cards -->
        <div class="wallet-stats-overview">
            <div class="wallet-stat-card">
                <div class="wallet-stat-value" id="statSavingsRate">0%</div>
                <div class="wallet-stat-label">Tejash</div>
            </div>
            <div class="wallet-stat-card">
                <div class="wallet-stat-value" id="statTransactionCount">0</div>
                <div class="wallet-stat-label">Tranzaksiyalar</div>
            </div>
            <div class="wallet-stat-card">
                <div class="wallet-stat-value" id="statAvgTransaction">0</div>
                <div class="wallet-stat-label">O'rtacha</div>
            </div>
        </div>
    </div>

    <!-- ============================================
         SERVICES PAGE
         ============================================ -->
    <div id="pageServices" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Xizmatlar</h1>
        </div>

        <!-- Services Grid -->
        <div class="wallet-section">
            <h3 style="font-size: 14px; color: var(--wallet-text-secondary); margin-bottom: 16px; padding: 0;">MOLIYAVIY BOSHQARUV</h3>
            <div class="wallet-services-grid">
                <div class="wallet-service-item" onclick="navigateTo('reminders')">
                    <div class="wallet-service-icon orange">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Eslatmalar</span>
                </div>
                <div class="wallet-service-item" onclick="navigateTo('debts')">
                    <div class="wallet-service-icon red">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                            <line x1="1" y1="10" x2="23" y2="10"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Qarzlar</span>
                </div>
                <div class="wallet-service-item" onclick="navigateTo('goals')">
                    <div class="wallet-service-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="6"/>
                            <circle cx="12" cy="12" r="2"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Maqsadlar</span>
                </div>
                <div class="wallet-service-item" onclick="navigateTo('budgets')">
                    <div class="wallet-service-icon purple">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/>
                            <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/>
                            <path d="M18 12a2 2 0 0 0 0 4h4v-4h-4z"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Byudjet</span>
                </div>
            </div>
        </div>

        <div class="wallet-section" style="margin-top: 24px;">
            <h3 style="font-size: 14px; color: var(--wallet-text-secondary); margin-bottom: 16px; padding: 0;">HISOBOTLAR</h3>
            <div class="wallet-services-grid">
                <div class="wallet-service-item" onclick="navigateTo('statistics')">
                    <div class="wallet-service-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 20V10M12 20V4M6 20v-6"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Statistika</span>
                </div>
                <div class="wallet-service-item" onclick="showExportModal()">
                    <div class="wallet-service-icon cyan">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Eksport</span>
                </div>
                <div class="wallet-service-item" onclick="navigateTo('topExpenses')">
                    <div class="wallet-service-icon orange">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                    </div>
                    <span class="wallet-service-label">Top xarajat</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
         PROFILE PAGE
         ============================================ -->
    <div id="pageProfile" class="page">
        <div class="wallet-profile-header">
            <div class="wallet-profile-avatar" id="profileAvatar">U</div>
            <div class="wallet-profile-name" id="profileName">Foydalanuvchi</div>
            <div class="wallet-profile-username" id="profileUsername">@username</div>
        </div>

        <!-- Settings Groups -->
        <div class="wallet-settings-group">
            <div class="wallet-settings-title">Sozlamalar</div>
            <div class="wallet-settings-list">
                <div class="wallet-settings-item" onclick="showLanguageModal()">
                    <div class="wallet-settings-icon blue">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="2" y1="12" x2="22" y2="12"/>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Til</div>
                    </div>
                    <div class="wallet-settings-value">
                        O'zbek
                        <svg class="wallet-settings-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="wallet-settings-item" onclick="showCurrencyModal()">
                    <div class="wallet-settings-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Valyuta</div>
                    </div>
                    <div class="wallet-settings-value">
                        UZS
                        <svg class="wallet-settings-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="wallet-settings-group">
            <div class="wallet-settings-title">Bildirishnomalar</div>
            <div class="wallet-settings-list">
                <div class="wallet-settings-item">
                    <div class="wallet-settings-icon orange">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Push bildirishnomalar</div>
                    </div>
                    <label class="wallet-toggle">
                        <input type="checkbox" id="pushNotifications" checked>
                        <span class="wallet-toggle-slider"></span>
                    </label>
                </div>
                <div class="wallet-settings-item">
                    <div class="wallet-settings-icon purple">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Eslatmalar</div>
                    </div>
                    <label class="wallet-toggle">
                        <input type="checkbox" id="reminderNotifications" checked>
                        <span class="wallet-toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="wallet-settings-group">
            <div class="wallet-settings-title">Yordam</div>
            <div class="wallet-settings-list">
                <div class="wallet-settings-item" onclick="showSupport()">
                    <div class="wallet-settings-icon blue">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Yordam markazi</div>
                    </div>
                    <svg class="wallet-settings-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
                <div class="wallet-settings-item" onclick="showAbout()">
                    <div class="wallet-settings-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                    </div>
                    <div class="wallet-settings-content">
                        <div class="wallet-settings-label">Ilova haqida</div>
                    </div>
                    <svg class="wallet-settings-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <div style="padding: 0 16px 32px;">
            <button class="wallet-form-btn danger" onclick="handleLogout()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
                Chiqish
            </button>
        </div>
    </div>

    <!-- ============================================
         REMINDERS PAGE
         ============================================ -->
    <div id="pageReminders" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Eslatmalar</h1>
            <div class="wallet-page-actions">
                <button class="wallet-icon-btn" onclick="showAddReminderModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
            </div>
        </div>

        <div id="remindersList" style="padding: 0 16px;">
            <!-- Loaded via JavaScript -->
        </div>
    </div>

    <!-- ============================================
         DEBTS PAGE
         ============================================ -->
    <div id="pageDebts" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Qarzlar</h1>
            <div class="wallet-page-actions">
                <button class="wallet-icon-btn" onclick="showAddDebtModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Filter Pills -->
        <div class="wallet-filters">
            <button class="wallet-filter-btn active" data-filter="all" onclick="setDebtFilter('all', this)">Barchasi</button>
            <button class="wallet-filter-btn" data-filter="given" onclick="setDebtFilter('given', this)">Berdim</button>
            <button class="wallet-filter-btn" data-filter="taken" onclick="setDebtFilter('taken', this)">Oldim</button>
        </div>

        <div id="debtsList" style="padding: 0 16px;">
            <!-- Loaded via JavaScript -->
        </div>
    </div>

    <!-- ============================================
         GOALS PAGE
         ============================================ -->
    <div id="pageGoals" class="page">
        <div class="wallet-page-header">
            <h1 class="wallet-page-title">Maqsadlar</h1>
            <div class="wallet-page-actions">
                <button class="wallet-icon-btn" onclick="showAddGoalModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="wallet-empty">
            <div class="wallet-empty-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10"/>
                    <circle cx="12" cy="12" r="6"/>
                    <circle cx="12" cy="12" r="2"/>
                </svg>
            </div>
            <div class="wallet-empty-title">Maqsadlar yo'q</div>
            <div class="wallet-empty-text">Pul yig'ish maqsadlarini qo'shing va ularni kuzating</div>
            <button class="wallet-cta-btn" onclick="showAddGoalModal()">Maqsad qo'shish</button>
        </div>
    </div>

    <!-- ============================================
         TOP EXPENSES PAGE
         ============================================ -->
    <div id="pageTopExpenses" class="page">
        <div class="wallet-page-header">
            <button class="wallet-icon-btn" onclick="navigateTo('home')" style="margin-right: 12px;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="wallet-page-title">Top xarajatlar</h1>
        </div>
        
        <div id="topExpensesContent" style="padding: 0 16px;">
            <!-- Loaded via JavaScript -->
        </div>
    </div>

    <!-- ============================================
         BOTTOM NAVIGATION - Telegram Wallet Style (Glass Effect)
         ============================================ -->
    <nav class="tg-wallet-nav">
        <button class="tg-wallet-nav-item active" data-page="home" onclick="navigateTo('home')">
            <div class="tg-wallet-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
            </div>
            <span class="tg-wallet-nav-label">Asosiy</span>
        </button>
        <button class="tg-wallet-nav-item" data-page="transactions" onclick="navigateTo('transactions')">
            <div class="tg-wallet-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                    <line x1="1" y1="10" x2="23" y2="10"/>
                </svg>
            </div>
            <span class="tg-wallet-nav-label">Tranzaksiya</span>
        </button>
        <button class="tg-wallet-nav-item" data-page="statistics" onclick="navigateTo('statistics')">
            <div class="tg-wallet-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M18 20V10M12 20V4M6 20v-6"/>
                </svg>
            </div>
            <span class="tg-wallet-nav-label">Statistika</span>
        </button>
        <button class="tg-wallet-nav-item" data-page="services" onclick="navigateTo('services')">
            <div class="tg-wallet-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
            </div>
            <span class="tg-wallet-nav-label">Xizmatlar</span>
        </button>
    </nav>

    <!-- ============================================
         MODALS
         ============================================ -->

    <!-- Add Transaction Modal -->
    <div id="addTransactionModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <div class="wallet-modal-handle"></div>
            <div class="wallet-modal-header">
                <span class="wallet-modal-title">Tranzaksiya qo'shish</span>
                <button class="wallet-modal-close" onclick="closeAddTransactionModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="addTransactionForm" onsubmit="handleAddTransaction(event)">
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Turi</label>
                    <select class="wallet-form-select" id="transactionType" required>
                        <option value="expense">Chiqim</option>
                        <option value="income">Kirim</option>
                    </select>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Summa</label>
                    <input type="number" class="wallet-form-input" id="transactionAmount" placeholder="0" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Valyuta</label>
                    <select class="wallet-form-select" id="transactionCurrency">
                        <option value="UZS">UZS - O'zbek so'mi</option>
                        <option value="USD">USD - Dollar</option>
                        <option value="EUR">EUR - Yevro</option>
                        <option value="RUB">RUB - Rubl</option>
                    </select>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Kategoriya</label>
                    <select class="wallet-form-select" id="transactionCategory">
                        <option value="Oziq-ovqat">Oziq-ovqat</option>
                        <option value="Transport">Transport</option>
                        <option value="Uy-joy">Uy-joy</option>
                        <option value="Kommunal">Kommunal</option>
                        <option value="Sog'liq">Sog'liq</option>
                        <option value="Ta'lim">Ta'lim</option>
                        <option value="Ko'ngilochar">Ko'ngilochar</option>
                        <option value="Kiyim">Kiyim</option>
                        <option value="Ish haqi">Ish haqi</option>
                        <option value="Biznes">Biznes</option>
                        <option value="Investitsiya">Investitsiya</option>
                        <option value="Boshqa">Boshqa</option>
                    </select>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Izoh (ixtiyoriy)</label>
                    <input type="text" class="wallet-form-input" id="transactionDescription" placeholder="Tranzaksiya haqida">
                </div>
                <button type="submit" class="wallet-form-btn">Qo'shish</button>
            </form>
        </div>
    </div>
    
    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <div class="wallet-modal-handle"></div>
            <div class="wallet-modal-header">
                <span class="wallet-modal-title">Eslatma qo'shish</span>
                <button class="wallet-modal-close" onclick="closeAddReminderModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="addReminderForm" onsubmit="handleAddReminder(event)">
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Sarlavha</label>
                    <input type="text" class="wallet-form-input" id="reminderTitle" placeholder="Eslatma nomi" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Summa</label>
                    <input type="number" class="wallet-form-input" id="reminderAmount" placeholder="0" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Sana</label>
                    <input type="date" class="wallet-form-input" id="reminderDate" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Takrorlash</label>
                    <select class="wallet-form-select" id="reminderRepeat">
                        <option value="none">Takrorlanmaydi</option>
                        <option value="daily">Har kuni</option>
                        <option value="weekly">Har hafta</option>
                        <option value="monthly">Har oy</option>
                    </select>
                </div>
                <button type="submit" class="wallet-form-btn">Qo'shish</button>
            </form>
        </div>
    </div>

    <!-- Add Debt Modal -->
    <div id="addDebtModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <div class="wallet-modal-handle"></div>
            <div class="wallet-modal-header">
                <span class="wallet-modal-title">Qarz qo'shish</span>
                <button class="wallet-modal-close" onclick="closeAddDebtModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="addDebtForm" onsubmit="handleAddDebt(event)">
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Qarz turi</label>
                    <select class="wallet-form-select" id="debtType" required>
                        <option value="given">Berdim (Menga qaytarishadi)</option>
                        <option value="taken">Oldim (Men qaytaraman)</option>
                    </select>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Kimga/Kimdan</label>
                    <input type="text" class="wallet-form-input" id="debtPersonName" placeholder="Ism" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Summa</label>
                    <input type="number" class="wallet-form-input" id="debtAmount" placeholder="0" required>
                </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Muddat (ixtiyoriy)</label>
                    <input type="date" class="wallet-form-input" id="debtDueDate">
        </div>
                <div class="wallet-form-group">
                    <label class="wallet-form-label">Izoh (ixtiyoriy)</label>
                    <input type="text" class="wallet-form-input" id="debtDescription" placeholder="Qarz haqida">
        </div>
                <button type="submit" class="wallet-form-btn">Qo'shish</button>
            </form>
        </div>
    </div>

    <!-- Not Registered Modal -->
    <div id="notRegisteredModal" class="wallet-modal">
        <div class="wallet-modal-content" style="text-align: center; padding: 40px 24px;">
            <div style="width: 80px; height: 80px; margin: 0 auto 24px; background: var(--wallet-bg-tertiary); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--wallet-accent-blue)" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
            </svg>
        </div>
            <h2 style="font-size: 22px; font-weight: 700; margin-bottom: 12px;">Ro'yxatdan o'tmagansiz</h2>
            <p style="color: var(--wallet-text-secondary); margin-bottom: 24px;">Ilovadan foydalanish uchun Telegram bot orqali ro'yxatdan o'ting</p>
            <button class="wallet-form-btn" onclick="openTelegramBot()">Botga o'tish</button>
        </div>
        </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="wallet-loading" style="display: none;">
        <div class="wallet-spinner"></div>
        </div>

    <!-- Scripts -->
    <script src="/static/js/wallet-app.js"></script>
</body>
</html>
