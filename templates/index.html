<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Balans AI</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/style.css">
    
    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
        <p style="margin-top: 20px; color: #666; font-size: 14px;">Yuklanmoqda...</p>
    </div>

    <!-- Asosiy Sahifa -->
    <div id="pageHome" class="page active">
        <!-- Header -->
        <header class="app-header">
            <img src="/static/logo.png" alt="Balans AI" class="app-logo" id="headerLogo">
        </header>

        <!-- Umumiy Balans -->
        <div class="balance-card" onclick="showBalanceDetails()">
            <div class="balance-icon">101</div>
            <div class="balance-amount" id="totalBalance">0 so'm</div>
            <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </div>

        <!-- Valyutalar -->
        <div class="currency-list" id="currencyList">
            <!-- JavaScript orqali yuklanadi -->
        </div>

        <!-- So'nggi Tranzaksiyalar -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">So'nggi tranzaksiyalar</h2>
                <svg class="section-arrow" onclick="navigateTo('transactions')" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="transactions-scroll" id="transactionsList">
                <!-- JavaScript orqali yuklanadi -->
            </div>
        </section>

        <!-- Statistika -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">Statitikalar</h2>
                <svg class="section-arrow" onclick="navigateTo('statistics')" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="stats-card">
                <canvas id="statsChart" class="stats-canvas"></canvas>
            </div>
        </section>
    </div>

    <!-- Tranzaksiyalar Sahifasi -->
    <div id="pageTransactions" class="page">
        <div class="page-header">
            <h2 class="page-title">Tranzaksiyalar</h2>
        </div>
        
        <!-- Search -->
        <div class="search-section">
            <div class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <input type="text" id="transactionSearch" placeholder="Qidiring..." class="search-input">
            </div>
        </div>
        
        <!-- Filter -->
        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">Barchasi</button>
            <button class="filter-btn" data-filter="income">Kirim</button>
            <button class="filter-btn" data-filter="expense">Chiqim</button>
            <button class="filter-btn" data-filter="debt_given">Qarz berish</button>
            <button class="filter-btn" data-filter="debt_taken">Qarz olish</button>
        </div>
        
        <!-- Transactions List -->
        <div id="allTransactionsList" class="transactions-list-grouped">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>

    <!-- Statistika Sahifasi -->
    <div id="pageStatistics" class="page">
        <div class="page-header">
            <h2 class="page-title">Statistika</h2>
        </div>
        
        <div style="padding: 16px;">
            <!-- Daromad dinamikasi -->
            <div class="stats-card" style="margin-bottom: 16px;">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #1a1a1a;">Daromad dinamikasi</h3>
                <canvas id="incomeTrendChart" class="stats-canvas"></canvas>
            </div>
            
            <!-- Top kategoriyalar -->
            <div class="stats-card" style="margin-bottom: 16px;">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #1a1a1a;">Eng ko'p xarajat</h3>
                <div id="topCategoriesList">
                    <!-- JavaScript orqali yuklanadi -->
                </div>
            </div>
            
            <!-- Xarajat taqsimoti -->
            <div class="stats-card">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #1a1a1a;">Xarajat taqsimoti</h3>
                <canvas id="expensePieChart" class="stats-canvas"></canvas>
            </div>
        </div>
    </div>

    <!-- Eslatmalar Sahifasi -->
    <div id="pageReminders" class="page">
        <div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h2 class="page-title">Eslatmalar</h2>
            <button class="add-btn" onclick="showAddReminderModal()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
            </button>
        </div>
        
        <div id="remindersList" class="reminders-list">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>
    
    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Yangi eslatma</h3>
            <form id="addReminderForm" onsubmit="handleAddReminder(event)">
                <div class="form-group">
                    <label>Nomi</label>
                    <input type="text" name="title" required placeholder="Masalan: Ijara to'lovi">
                </div>
                <div class="form-group">
                    <label>Summa</label>
                    <input type="number" name="amount" required placeholder="0">
                </div>
                <div class="form-group">
                    <label>Valyuta</label>
                    <select name="currency" required>
                        <option value="UZS">UZS</option>
                        <option value="USD">USD</option>
                        <option value="EUR">EUR</option>
                        <option value="RUB">RUB</option>
                        <option value="TRY">TRY</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sana</label>
                    <input type="date" name="reminder_date" required>
                </div>
                <div class="form-group">
                    <label>Takrorlash</label>
                    <select name="repeat_interval">
                        <option value="none">Takrorlanmaydi</option>
                        <option value="daily">Har kuni</option>
                        <option value="weekly">Har hafta</option>
                        <option value="monthly">Har oy</option>
                        <option value="yearly">Har yil</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeAddReminderModal()">Bekor qilish</button>
                    <button type="submit" class="btn-primary">Qo'shish</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Qarzlar Sahifasi -->
    <div id="pageDebts" class="page">
        <div class="page-header">
            <h2 class="page-title">Qarzlar</h2>
        </div>
        
        <!-- Filter -->
        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">Barchasi</button>
            <button class="filter-btn" data-filter="given">Berdim</button>
            <button class="filter-btn" data-filter="taken">Oldim</button>
        </div>
        
        <div id="debtsList" class="debts-list">
            <!-- JavaScript orqali yuklanadi -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 18V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M10.07 2.82L3.14 8.37C2.36 8.99 1.86 10.3 2.03 11.28L3.36 19.24C3.6 20.66 4.96 21.81 6.4 21.81H17.6C19.03 21.81 20.4 20.65 20.64 19.24L21.97 11.28C22.13 10.3 21.63 8.99 20.86 8.37L13.93 2.83C12.86 1.97 11.13 1.97 10.07 2.82Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="transactions">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 22H17C20 22 22 20 22 17V12C22 9.3 20.3 7.3 17.8 7C17.6 7 17.3 7 17 7H7C6.7 7 6.5 7 6.2 7.1C3.6 7.4 2 9.3 2 12V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M22 12.5H19C17.9 12.5 17 13.4 17 14.5C17 15.6 17.9 16.5 19 16.5H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="statistics">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M10.11 11.15H7.46C6.83 11.15 6.32 11.66 6.32 12.29V17.41H10.11V11.15Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12.76 6.6H11.24C10.61 6.6 10.1 7.11 10.1 7.74V17.4H13.89V7.74C13.89 7.11 13.39 6.6 12.76 6.6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M16.55 12.85H13.9V17.4H17.69V13.99C17.68 13.36 17.17 12.85 16.55 12.85Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="reminders">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M20.75 13.25C20.75 18.08 16.83 22 12 22C7.17 22 3.25 18.08 3.25 13.25C3.25 8.42 7.17 4.5 12 4.5C16.83 4.5 20.75 8.42 20.75 13.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12 8V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9 2H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="nav-item" data-page="debts">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M20.5 11.3V7.04C20.5 3.01 19.56 2 15.78 2H8.22C4.44 2 3.5 3.01 3.5 7.04V18.3C3.5 20.96 4.96 21.59 6.73 19.69L6.74 19.68C7.56 18.81 8.81 18.88 9.52 19.83L10.53 21.18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M8 7H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9 11H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
    </nav>

    <!-- Main JavaScript -->
    <script src="/static/js/main.js"></script>
</body>
</html>
